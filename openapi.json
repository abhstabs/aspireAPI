{"openapi": "3.0.2", "info": {"title": "NinjaAPI", "version": "1.0.0", "description": ""}, "paths": {"/api/status/": {"get": {"operationId": "aspireAPI_api_status", "summary": "Status", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"title": "Response", "type": "string"}}}}}, "description": "Status check endpoint."}}, "/api/users/me/": {"get": {"operationId": "users_api_me", "summary": "Me", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserSchema"}}}}, "401": {"description": "Unauthorized", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}}, "description": "Get details of the current user", "security": [{"SessionAuth": []}]}}, "/api/users/": {"post": {"operationId": "users_api_create_user", "summary": "Create User", "parameters": [], "responses": {"201": {"description": "Created", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserSchema"}}}}, "400": {"description": "Bad Request", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}}, "description": "Endpoint to create a new user for the application.\nAuthentication is turned off for the endpoint", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserInSchema"}}}, "required": true}}}, "/api/users/login/": {"post": {"operationId": "users_api_login_user", "summary": "Login User", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"title": "Response", "type": "string"}}}}, "403": {"description": "Forbidden", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}}, "description": "Endpoint to login user to the system.\nAuthentication used is username password based authentication\nAuthentication is turned off for the endpoint.", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoginSchema"}}}, "required": true}}}, "/api/users/logout/": {"post": {"operationId": "users_api_logout_user", "summary": "Logout User", "parameters": [], "responses": {"204": {"description": "No Content"}}, "description": "Endpoint to logut the current user from system", "security": [{"SessionAuth": []}]}}, "/api/loans/": {"get": {"operationId": "loans_api_get_loans", "summary": "Get Loans", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"title": "Response", "type": "array", "items": {"$ref": "#/components/schemas/LoanApplicationSchema"}}}}}}, "description": "Endpoint to fetch all loans for a given user,\nor all loans if the user is Admin. Grouped by state", "security": [{"SessionAuth": []}]}, "post": {"operationId": "loans_api_create_loan_application", "summary": "Create Loan Application", "parameters": [], "responses": {"201": {"description": "Created", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoanApplicationSchema"}}}}, "400": {"description": "Bad Request", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}, "403": {"description": "Forbidden", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}}, "description": "Endpoing to create a new loan application for the user", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoanApplicationInputSchema"}}}, "required": true}, "security": [{"SessionAuth": []}]}, "put": {"operationId": "loans_api_approve_or_reject_loan", "summary": "Approve Or Reject Loan", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoanApplicationSchema"}}}}, "403": {"description": "Forbidden", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}}, "description": "Endpoint for the Admin user to approve/reject loans", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoanApprovalSchema"}}}, "required": true}, "security": [{"SessionAuth": []}]}}, "/api/loans/{repayment_id}": {"put": {"operationId": "loans_api_pay_amount", "summary": "Pay Amount", "parameters": [{"in": "path", "name": "repayment_id", "schema": {"title": "Repayment Id", "type": "integer"}, "required": true}], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoanRepaymentSchema"}}}}, "400": {"description": "Bad Request", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}, "403": {"description": "Forbidden", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ErrorSchema"}}}}}, "description": "Endpoint for customers to pay the term amount", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoanRepaymentInputSchema"}}}, "required": true}, "security": [{"SessionAuth": []}]}}}, "components": {"schemas": {"UserSchema": {"title": "UserSchema", "description": "Pydantic Representation of the User model", "type": "object", "properties": {"id": {"title": "Id", "type": "string", "format": "uuid"}, "email": {"title": "Email", "maxLength": 254, "type": "string"}, "first_name": {"title": "First Name", "maxLength": 150, "type": "string"}, "last_name": {"title": "Last Name", "maxLength": 150, "type": "string"}}, "required": ["email"]}, "ErrorSchema": {"title": "ErrorSchema", "description": "Pydantic representation of Error\nCan be extended to include more fields", "type": "object", "properties": {"message": {"title": "Message", "type": "string"}}, "required": ["message"]}, "UserInSchema": {"title": "UserInSchema", "description": "User Input schema containing password field too", "type": "object", "properties": {"email": {"title": "Email", "maxLength": 254, "type": "string"}, "first_name": {"title": "First Name", "maxLength": 150, "type": "string"}, "last_name": {"title": "Last Name", "maxLength": 150, "type": "string"}, "password": {"title": "Password", "maxLength": 128, "type": "string"}}, "required": ["email", "password"]}, "LoginSchema": {"title": "LoginSchema", "description": "User Input Schema for login to the system", "type": "object", "properties": {"email": {"title": "Email", "maxLength": 254, "type": "string"}, "password": {"title": "Password", "maxLength": 128, "type": "string"}}, "required": ["email", "password"]}, "LoanRepaymentSchema": {"title": "LoanRepaymentSchema", "description": "Schema representation of Loan Repayment model for output", "type": "object", "properties": {"id": {"title": "Id", "type": "integer"}, "amount": {"title": "Amount", "type": "number"}, "date_of_payment": {"title": "Date Of Payment", "type": "string", "format": "date"}, "state": {"title": "State", "maxLength": 20, "type": "string"}}, "required": ["amount", "date_of_payment", "state"]}, "LoanApplicationSchema": {"title": "LoanApplicationSchema", "description": "Schema representation of Loan Application Output Data\nContains the Loan Application id, Term, Amount, Date and State", "type": "object", "properties": {"id": {"title": "Id", "type": "string", "format": "uuid"}, "term": {"title": "Term", "type": "integer"}, "amount": {"title": "Amount", "type": "number"}, "date": {"title": "Date", "type": "string", "format": "date"}, "state": {"title": "State", "default": "PENDING", "maxLength": 20, "type": "string"}, "user": {"$ref": "#/components/schemas/UserSchema"}, "pending_amount": {"title": "Pending Amount", "type": "number"}, "pending_terms": {"title": "Pending Terms", "type": "integer"}, "repayments": {"title": "Repayments", "type": "array", "items": {"$ref": "#/components/schemas/LoanRepaymentSchema"}}}, "required": ["term", "amount", "date", "user", "pending_amount", "pending_terms", "repayments"]}, "LoanApplicationInputSchema": {"title": "LoanApplicationInputSchema", "description": "Pydantic/Schema represenation of Loan Application Input Data\nOnly contains Term, Amount, and Date", "type": "object", "properties": {"term": {"title": "Term", "type": "integer"}, "amount": {"title": "Amount", "type": "number"}, "date": {"title": "Date", "type": "string", "format": "date"}}, "required": ["term", "amount", "date"]}, "LoanApprovalSchema": {"title": "LoanApprovalSchema", "description": "Schema representation of Loan Application Approval Data\nContains Loan Application id and State", "type": "object", "properties": {"id": {"title": "Id", "type": "string", "format": "uuid"}, "state": {"title": "State", "default": "PENDING", "maxLength": 20, "type": "string"}}}, "LoanRepaymentInputSchema": {"title": "LoanRepaymentInputSchema", "description": "Schema representation of Loan Repayment model for output", "type": "object", "properties": {"amount": {"title": "Amount", "type": "number"}}, "required": ["amount"]}}, "securitySchemes": {"SessionAuth": {"type": "apiKey", "in": "cookie", "name": "sessionid"}}}, "servers": null}